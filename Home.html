<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Valentine ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&family=Great+Vibes&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
  font-family:'Poppins', sans-serif;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  color:#fff;
  overflow-x:hidden;
}

/* Floating hearts */
.heart{
  position:fixed;
  bottom:-20px;
  animation:floatUp 6s linear infinite;
  font-size:20px;
  pointer-events:none;
}

@keyframes floatUp{
  0%{transform:translateY(0);opacity:1;}
  100%{transform:translateY(-100vh);opacity:0;}
}

section{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  text-align:center;
  padding:20px;
}

.card{
  background:rgba(255,255,255,0.15);
  backdrop-filter:blur(15px);
  padding:40px;
  border-radius:25px;
  box-shadow:0 20px 40px rgba(0,0,0,0.2);
  width:100%;
  max-width:500px;
  position:relative;
}

h1{font-family:'Great Vibes', cursive;font-size:clamp(2rem,5vw,3rem);}
h2{font-size:clamp(1.4rem,4vw,2rem);}
h3{font-size:clamp(1rem,3vw,1.2rem);}

button{
  margin:12px;
  padding:12px 28px;
  border:none;
  border-radius:30px;
  font-size:1rem;
  cursor:pointer;
  transition:0.3s;
  min-width:120px;
}

.yes-btn{ background:#ff4d6d; color:white; }
.no-btn{ background:#444; color:white; }
.primary-btn{ background:#ff3366; color:white; }

button:hover{
  transform:scale(1.08);
  box-shadow:0 10px 20px rgba(0,0,0,0.2);
}

textarea{
  width:100%;
  margin-top:15px;
  padding:12px;
  border-radius:15px;
  border:none;
  resize:none;
  font-family:'Poppins';
  font-size:0.95rem;
}

#finalView{
  border:2px solid #ff4d6d;
  background:#fff;
  color:#333;
}

.modal{
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:rgba(0,0,0,0.7);
  display:none;
  justify-content:center;
  align-items:center;
  padding:20px;
}

.modal-content{
  background:white;
  color:#ff3366;
  padding:30px;
  border-radius:20px;
  width:100%;
  max-width:400px;
  max-height:90vh;
  overflow-y:auto;
  text-align:center;
}

/* Final YES/NO Area */
#finalArea{
  position:relative;
  height:220px;
  width:100%;
  overflow:hidden; /* IMPORTANT for mobile */
}

/* Initial placement */
#finalYesBtn,
#finalNoBtn{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
}

#noMessage{
  display:none;
  margin-top:20px;
  font-size:16px;
}

@media (max-width:480px){
  .card{padding:25px 18px;}
  button{width:100%;margin:10px 0;}
  #finalArea{height:260px;}
}
</style>
</head>

<body>

<section id="hero">
  <div class="card">
    <h1>Hey Shona My Love ‚ù§Ô∏è</h1>
    <h3>Happy Valentine's day shona meri jaan ‚ù§Ô∏è</h3>
    <p>I made something special just for you‚Ä¶</p>
    <button class="primary-btn" onclick="startQuestions()">Start</button>
  </div>
</section>

<section id="questionSection" style="display:none;">
  <div class="card">
    <h2 id="questionText"></h2>

    <div>
      <button class="yes-btn" id="yesBtn" onclick="selectAnswer('Yes')">Yes üíï</button>
      <button class="no-btn" id="noBtn" onclick="selectAnswer('No')">No üíî</button>
    </div>

    <textarea id="reasonBox" placeholder="Please tell me why üíå" style="display:none;"></textarea>

    <button class="primary-btn" id="nextBtn" onclick="goNext()" style="display:none;">
      Next ‚û°
    </button>
  </div>
</section>

<section id="finalSection" style="display:none;">
  <div class="card">
    <h3>‚ú® Will You Be My Valentine? ‚ú®</h3>

    <div id="finalArea">
      <button class="yes-btn" id="finalYesBtn" onclick="showLoveMessage()">üíñ YES</button>
      <button class="no-btn" id="finalNoBtn">üíî NO</button>
    </div>

    <div id="noMessage">üòú Nice try! Only YES works!</div>
  </div>
</section>

<div class="modal" id="loveModal">
  <div class="modal-content">
    <h3>You just made me the happiest person alive ‚ù§Ô∏è</h3>
    <p>If you feel the same way, just tap below and reply to me ‚ù§</p>
    <button class="primary-btn" onclick="openFeedbackModal()">I Love You Too üíå</button>
  </div>
</div>

<div class="modal" id="feedbackModal">
  <div class="modal-content">
    <h3>Let me know your thoughts ‚ù§Ô∏è</h3>
    <textarea id="finalView" rows="4"></textarea>
    <button class="primary-btn" onclick="sendTelegramMessage()">Send üíå</button>
  </div>
</div>

<script>

setInterval(()=>{
  const heart=document.createElement("div");
  heart.classList.add("heart");
  heart.innerHTML="‚ù§Ô∏è";
  heart.style.left=Math.random()*100+"vw";
  heart.style.fontSize=Math.random()*20+10+"px";
  document.body.appendChild(heart);
  setTimeout(()=>heart.remove(),6000);
},600);

const questions=[
"Will you let me be the reason behind your happiest smile?",
"Will you walk beside me‚Ä¶ not just today, but always?",
"Will you be my peace when the world feels loud?",
"Do you feel safe with me the way I feel with you?",
"When life gets messy, will you still choose me?"
];

let current=0;
let answers=[];
let selectedAnswer="";

function startQuestions(){
  document.getElementById("hero").style.display="none";
  document.getElementById("questionSection").style.display="flex";
  document.getElementById("questionText").innerText=questions[current];
}

function selectAnswer(answer){
  selectedAnswer=answer;
  const yesBtn=document.getElementById("yesBtn");
  const noBtn=document.getElementById("noBtn");
  const reasonBox=document.getElementById("reasonBox");
  const nextBtn=document.getElementById("nextBtn");

  if(answer==="Yes"){noBtn.disabled=true;noBtn.style.opacity="0.5";}
  else{yesBtn.disabled=true;yesBtn.style.opacity="0.5";}

  reasonBox.style.display="block";
  nextBtn.style.display="inline-block";
}

function goNext(){
  const reasonBox=document.getElementById("reasonBox");
  if(reasonBox.value===""){alert("Please tell me why üíå");return;}

  answers.push({
    question:questions[current],
    answer:selectedAnswer,
    reason:reasonBox.value
  });

  reasonBox.value="";
  reasonBox.style.display="none";
  document.getElementById("nextBtn").style.display="none";
  document.getElementById("yesBtn").disabled=false;
  document.getElementById("noBtn").disabled=false;
  document.getElementById("yesBtn").style.opacity="1";
  document.getElementById("noBtn").style.opacity="1";

  current++;

  if(current<questions.length){
    document.getElementById("questionText").innerText=questions[current];
  }else{
    document.getElementById("questionSection").style.display="none";
    document.getElementById("finalSection").style.display="flex";
    activateFloatingNo();
  }
}

function activateFloatingNo(){
  const noBtn=document.getElementById("finalNoBtn");
  const yesBtn=document.getElementById("finalYesBtn");
  const area=document.getElementById("finalArea");
  const message=document.getElementById("noMessage");

  function setInitialPositions(){
    const areaWidth=area.clientWidth;
    const btnWidth=noBtn.offsetWidth;
    yesBtn.style.left=(areaWidth/2 - btnWidth - 20)+"px";
    noBtn.style.left=(areaWidth/2 + 20)+"px";
  }

  setInitialPositions();
  window.addEventListener("resize",setInitialPositions);

  function move(){
    const maxX=area.clientWidth-noBtn.offsetWidth;
    const maxY=area.clientHeight-noBtn.offsetHeight;
    noBtn.style.left=Math.random()*maxX+"px";
    noBtn.style.top=Math.random()*maxY+"px";
  }

  area.addEventListener("mousemove",(e)=>{
    const rect=noBtn.getBoundingClientRect();
    const dist=Math.hypot(
      e.clientX-(rect.left+rect.width/2),
      e.clientY-(rect.top+rect.height/2)
    );
    if(dist<90){move();}
  });

  noBtn.addEventListener("click",(e)=>{
    e.preventDefault();
    message.style.display="block";
    setTimeout(()=>{message.style.display="none";},2000);
    move();
  });
}

function showLoveMessage(){
  document.getElementById("loveModal").style.display="flex";
}

function openFeedbackModal(){
  document.getElementById("loveModal").style.display="none";
  document.getElementById("feedbackModal").style.display="flex";
}

function sendTelegramMessage(){
  const botToken="8235910903:AAGiihRjYYxTpiOY1NHQwGoU720pcq_6NlY";
  const chatId="810368272";
  const finalView=document.getElementById("finalView").value;

  let summary="üíñ Valentine Response Summary üíñ\n\n";
  answers.forEach((item,index)=>{
    summary+=`Q${index+1}: ${item.question}\n`;
    summary+=`Answer: ${item.answer}\n`;
    summary+=`Reason: ${item.reason}\n\n`;
  });

  summary+="She said YES to the proposal ‚ù§Ô∏è\n\n";
  summary+="Her Message:\n"+finalView+"\n\n";
  summary+="Time: "+new Date().toLocaleString();

  fetch(`https://api.telegram.org/bot${botToken}/sendMessage`,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({chat_id:chatId,text:summary})
  })
  .then(res=>res.json())
  .then(data=>{
    if(data.ok){
      document.getElementById("feedbackModal").innerHTML=`
        <div class="modal-content">
          <h3>Message Sent Successfully üíñ</h3>
          <p>Reloading...</p>
        </div>`;
      setTimeout(()=>location.reload(),1500);
    }else{
      alert("Error Sending ‚ùå");
    }
  })
  .catch(()=>alert("Telegram Error ‚ùå"));
}

</script>
</body>
</html>